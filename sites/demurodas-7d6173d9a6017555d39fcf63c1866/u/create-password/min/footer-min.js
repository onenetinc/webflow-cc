firebase.auth().onAuthStateChanged((e=>{e?window.location.replace("/"):document.getElementById("waitingContainer").style.display="none"}));const emailError=document.getElementById("emailError"),email=document.getElementById("email"),submitButton=document.getElementById("submit"),formError=document.getElementById("globalError"),formSuccess=document.getElementById("formSuccess"),resetPassword=()=>{clearErrors(),validateForm()&&postResetPasswordData()};submitButton.addEventListener("click",resetPassword),document.body.addEventListener("keyup",(e=>{13!==e.keyCode&&13!==e.which||submitButton.click()}));const clearErrors=()=>{emailError.classList.remove("input_label_error"),emailError.innerText="Enter email address",email.classList.remove("input_field_error"),formError.style.display="none",formSuccess.style.display="none"},validateForm=()=>validateEmail(email.value)?(console.log("Validation passed"),!0):(emailError.classList.add("input_label_error"),emailError.innerText="Please enter a valid email",email.classList.add("input_field_error"),!1),postResetPasswordData=async()=>{try{submitButton.removeEventListener("click",resetPassword),submitButton.value="Please wait...";const e=await fetch(resetPasswordUrl,{method:"POST",body:JSON.stringify({email:email.value})});if(200!==e.status)throw e.status;formSuccess.style.display="block",emailError.innerText="Enter email address",submitButton.addEventListener("click",resetPassword),submitButton.value="Submit",setTimeout((()=>{formSuccess.style.display="none"}),1e4)}catch(e){Sentry.captureException(e),formError.style.display="block",emailError.innerText="Enter email address",submitButton.addEventListener("click",resetPassword),submitButton.value="Submit"}};