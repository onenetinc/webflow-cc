firebase.auth().onAuthStateChanged((e=>{e?window.location.replace("/"):document.getElementById("waitingContainer").style.display="none"}));const heading=document.getElementById("heading"),emailError=document.getElementById("emailError"),emailInput=document.getElementById("email"),passwordError=document.getElementById("passwordError"),passwordInput=document.getElementById("Password-3"),passwordVerifyError=document.getElementById("passwordVerifyError"),passwordVerifyInput=document.getElementById("Password-4"),formError=document.getElementById("globalError"),submitButton=document.getElementById("submit");emailError.style.display="none",emailInput.style.display="none",passwordInput.style.display="none",passwordVerifyInput.style.display="none",formError.classList.add("global_error"),submitButton.style.display="none";const urlParams=new URLSearchParams(window.location.search),mode=urlParams.get("mode"),actionCode=urlParams.get("oobCode"),apiKey=urlParams.get("apiKey"),continueUrl=urlParams.get("continueUrl"),handleResetPassword=async()=>{try{if(submitButton.value="Please wait...",submitButton.removeEventListener("click",handleResetPassword),clearErrors(),passwordInput.value!==passwordVerifyInput.value||!passwordInput.value||!passwordVerifyInput.value)throw{code:"custom/no-match"};{const e=await firebase.auth().verifyPasswordResetCode(actionCode);await firebase.auth().confirmPasswordReset(actionCode,passwordVerifyInput.value),await firebase.auth().signInWithEmailAndPassword(e,passwordVerifyInput.value),window.location.replace("/")}}catch(e){switch(e.code){case"custom/no-match":passwordVerifyError.classList.add("input_label_error"),passwordVerifyError.innerText="Sorry, these passwords need to match",passwordVerifyInput.classList.add("input_field_error");break;case"auth/weak-password":passwordVerifyError.classList.add("input_label_error"),passwordVerifyError.innerText="Sorry, your password needs at least 6 characters",passwordVerifyInput.classList.add("input_field_error");break;default:formError.style.display="block",Sentry.captureException(e)}submitButton.value="Submit",submitButton.addEventListener("click",handleResetPassword)}};if("resetPassword"===mode)passwordInput.style.display="block",passwordVerifyInput.style.display="block",submitButton.style.display="block",submitButton.addEventListener("click",handleResetPassword);document.body.addEventListener("keyup",(e=>{13!==e.keyCode&&13!==e.which||submitButton.click()}));const clearErrors=()=>{passwordVerifyError.classList.remove("input_label_error"),passwordVerifyError.innerText="Verify Password",passwordVerifyInput.classList.remove("input_field_error")};