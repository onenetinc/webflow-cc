window.location.href.includes("mode=")&&(document.getElementById("main").style.display="none",document.getElementById("pdfSelector").classList.contains("w-condition-invisible")?(document.querySelector(".portrait-pdf-wrapper").style.display="none",document.querySelector(".landscape-pdf-wrapper").style.display="flex"):(document.querySelector(".landscape-pdf-wrapper").style.display="none",document.querySelector(".portrait-pdf-wrapper").style.display="flex"),window.location.href.includes("mode=pdf")&&(document.querySelector(".pdf-page-2-wrapper").style.display="flex"));const priceHeading=document.getElementById("priceHeading"),price=document.getElementById("price"),downloadBtn=document.getElementById("download");firebase.auth().onAuthStateChanged((e=>{e?(console.log("user is authed"),getPricing(),setAuthedTearSheet(),downloadBtn.style.display="flex"):(console.log("user is not authed"),setPubTearSheet())}));const getPricing=async()=>{try{console.log("User is authed, sending request for private data"),priceHeading.style.display="block",price.style.display="block";const e=document.getElementById("sku").innerText,t=await firebase.auth().currentUser.getIdToken(!0),n=await fetch(`${getPrivateWfDataUrl}?token=${t}&sku=${e}`);if(200!==n.status)throw n.status;{const e=await n.json(),t=document.querySelectorAll("[data-pdf='price']"),o=document.querySelectorAll("[data-pdf='priceHeading']");t.forEach((t=>t.innerHTML=e)),t.forEach((e=>e.style.display="block")),o.forEach((e=>e.style.display="block"))}}catch(e){Sentry.captureException(e),price.innerHTML="Please contact us for pricing"}},scripts=document.querySelectorAll(".w-json");let imgUrls=[];scripts.forEach((e=>{const t=JSON.parse(e.innerText);"product-p"===t.group&&imgUrls.push(t.items[0].url)}));const downloadText=document.getElementById("downloadText"),downloadZip=async()=>{try{downloadBtn.removeEventListener("click",downloadZip),downloadText.innerText="Preparing download...";const e=await firebase.auth().currentUser.getIdToken(!0);let t="";imgUrls.forEach((e=>{t+=encodeURIComponent(e)+","}));const n=t.substr(0,t.length-1),o=`${createZipUrl}?urls=${n}&token=${e}`,d=await fetch(o),l=await d.blob(),a=document.getElementById("title").innerText;saveAs(l,a+".zip"),downloadText.innerHTML="Download all images",downloadBtn.addEventListener("click",downloadZip)}catch(e){Sentry.captureException(e),downloadText.innerHTML="Download all images",downloadBtn.addEventListener("click",downloadZip)}};downloadBtn.addEventListener("click",downloadZip);let pubPath="pdfs-pub",privPath="pdfs-priv";window.location.hostname.includes(".webflow.io")&&(pubPath="pdfs-pub-staging",privPath="pdfs-priv-staging");const setAuthedTearSheet=async()=>{console.log("Setting private download");try{const e=firebase.storage().ref(),t=window.location.href.split("/"),n=t[t.length-1],o=e.child(`${privPath}/${n}`),d=e.child(`${pubPath}/${n}`),l=await o.getDownloadURL(),a=await d.getDownloadURL(),i=document.getElementById("tearSheet"),s=document.getElementById("downloadOptionsWrapper");i.addEventListener("click",(()=>{"none"===s.style.display?s.style.display="block":"block"===s.style.display&&(s.style.display="none")})),document.getElementById("withPricing").addEventListener("click",(()=>window.open(l,"_blank"))),document.getElementById("withoutPricing").addEventListener("click",(()=>window.open(a,"_blank"))),document.getElementById("dropdownIcon").style.display="block",document.getElementById("downloadIcon").style.display="none",document.getElementById("tearSheet").style.display="flex",s.style.display="none"}catch(e){console.error(e)}},setPubTearSheet=async()=>{console.log("Setting public download");try{const e=firebase.storage().ref(),t=window.location.href.split("/"),n=t[t.length-1].split("?")[0],o=e.child(`${pubPath}/${n}`),d=await o.getDownloadURL();document.getElementById("tearSheet").addEventListener("click",(()=>{window.open(d,"_blank")})),document.getElementById("dropdownIcon").style.display="none",document.getElementById("downloadIcon").style.display="block",document.getElementById("tearSheet").style.display="flex"}catch(e){console.error(e)}};setTimeout((()=>{const e=getCookies(),t=document.getElementById("tradeModalWrapper");(e._hideTradeModal||window.location.href.includes("mode="))&&(t.style.display="none");[document.getElementById("tradeJoinBtn"),document.getElementById("tradeDismissBtn")].forEach((e=>{e&&e.addEventListener("click",(()=>{let e=new Date;e.setMonth(e.getMonth()+1),e.toUTCString(),document.cookie=`_hideTradeModal=true; expires=${e}; path=/`,t.style.display="none"}))}))}),2e3);