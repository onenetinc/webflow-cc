const mainPathname=window.location.pathname.replace(/^\//,"");if("product"==mainPathname.split("/")[0]){function getPlainPath(){const e=window.location.pathname.replace(/^\//,""),t=e.split("/");let a;return console.log("pathname: ",e),console.log("pathParts: ",t),t.length<3||!t.includes("all")?a=t.pop()||t.pop():3===t.length&&t.includes("all")&&(a=t[1]+"-"+t[2]),a}const e=getPlainPath();console.log("pagePathName: ",e);const t={all:{category:"All"},new:{category:"New"},"seating-all":{category:"Seating",subcategory:["All"]},sofas:{category:"Seating",subcategory:["Sofas"]},chairs:{category:"Seating",subcategory:["Chairs"]},chaises:{category:"Seating",subcategory:["Chaises"]},"dining-chair":{category:"Seating",subcategory:["Dining chair"]},benches:{category:"Seating",subcategory:["Benches"]},"tables-all":{category:"Tables",subcategory:["All"]},"side-tables":{category:"Tables",subcategory:["Side Tables"]},"coffee-cocktail-tables":{category:"Tables",subcategory:["Coffee/Cocktail Tables"]},"dining-tables":{category:"Tables",subcategory:["Dining Tables"]},consoles:{category:"Tables",subcategory:["Consoles"]},"storage-all":{category:"Storage",subcategory:["All"]},cabinets:{category:"Storage",subcategory:["Cabinets"]},shelving:{category:"Storage",subcategory:["Shelving"]},"bedside-tables":{category:"Tables",subcategory:["Bedside Tables"]},"accessories-all":{category:"Accessories",subcategory:["All"]},mirrors:{category:"Accessories",subcategory:["Mirrors"]},screens:{category:"Accessories",subcategory:["Screens"]}};async function loadProducts(){const a=await async function(){const e=localStorage.getItem("allProducts")?JSON.parse(localStorage.getItem("allProducts")):null;return e||new Promise(((e,t)=>{$.get("/dev/all-collection",(function(t){var a=$("<output>").append($.parseHTML(t)).find("span");let o=[];a.each((function(){let e=$(this),t=e.next("img"),a=new Promise((a=>{t.on("load",(function(){let o=this.naturalWidth,s=this.naturalHeight;if(o&&s){let t=o/s;a({filename:e.data("src")?.split(cmsImageBaseUrl)[1],name:e.data("name"),slug:e.data("slug"),aspectRatio:t,category:e.data("category"),subcategory:e.data("subcategory"),new:e.data("new")})}else console.log("Invalid dimensions for image",t.attr("src")),a(null)})),t[0].complete&&t.trigger("load")}));o.push(a)})),Promise.all(o).then((t=>{console.log("about to set storage?"),localStorage.setItem("allProducts",JSON.stringify(t)),e(t)}))})).fail(t)}))}();dataArray=a.filter((a=>a&&"all"===e?a:a&&"new"==e?a.new:a&&a.category===t[e]?.category&&t[e]?.subcategory.includes("All")||a&&a.category===t[e]?.category&&t[e]?.subcategory.includes(a.subcategory)?a:void 0));const o=document.getElementById("pig");new Pig(dataArray,{spaceBetweenImages:20,urlForSize:function(e,t){return twicPicsUrl+e+"?twic=v1/resize=-x"+t},getImageSize:function(e){return e<=640?100:600},getMinAspectRatio:function(e){return 640>=e||1280>=e?2:1920>=e?3:4}}).enable(),o.innerText="";const s=new MutationObserver((function(e){for(const t of e)if("childList"==t.type&&"pig-figure"===t.target.className){const e=t.addedNodes[0];if(e&&e.src){const a=new URL(e.src).pathname.split("/"),o=a[a.length-1];dataArray.forEach((a=>{if(a.filename===o){const o=a.slug;e.addEventListener("click",(function(){window.location.href="/products/"+o})),o.toUpperCase().replaceAll("-"," "),t.target.dataset.product=a.name}}))}}}));s.observe(o,{attributes:!0,childList:!0,subtree:!0})}loadProducts()}const base="https://demurodas.netlify.app/.netlify/functions",signUpUrl=`${base}/signUp`,getPrivateWfDataUrl=`${base}/getPrivateWfData`,getProfileUrl=`${base}/getProfile`,updateProfileUrl=`${base}/updateProfile`,resetPasswordUrl=`${base}/resetPassword`,createZipUrl=`${base}/createZip`,generatePdfUrl=`${base}/generateProductPdf`,validateString=e=>!(""===e||e.length<2)||(console.log("String failed string vaildation"),!1),validateEmail=e=>!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())||(console.log("Email failed email vaildation"),!1),validateWebsite=e=>!e||0===e.length||""===e||(!!(e.length>1&&String(e).includes("."))||(console.log("Website failed website vaildation"),!1)),userLinks=document.querySelectorAll("[data-nav='userLinks']"),signUp=document.querySelectorAll("[data-nav='signUp']"),signIn=document.querySelectorAll("[data-nav='signIn']"),signOut=document.querySelectorAll("[data-nav='signOut']"),account=document.querySelectorAll("[data-nav='account']"),divider=document.querySelectorAll("[data-nav='divider']"),profileSettings=document.querySelectorAll("[data-nav='profileSettings']"),hideFromMembers=document.querySelectorAll(".hide-from-members"),currentPath=window.location.pathname;firebase.auth().onAuthStateChanged((e=>{if(userLinks.forEach((e=>{e&&(e.style.display="none")})),e){["/u/sign-in","u/sign-up"].includes(currentPath)&&window.location.replace("/"),[signUp,divider,signIn].forEach((e=>{e&&e.forEach((e=>e.style.display="none"))})),userLinks.forEach((e=>{e&&(e.style.display="flex")})),gtag("config","UA-6372121-1",{user_id:e.uid}),signOut.forEach((e=>{e.addEventListener("click",(async()=>{userLinks.forEach((e=>{e&&(e.style.display="none")})),await firebase.auth().signOut(),window.location.reload()}))}))}else{console.log("No user is signed in");["/u/profile-settings"].includes(currentPath)&&window.location.replace("/"),[account,profileSettings,signOut].forEach((e=>{e&&e.forEach((e=>e.style.display="none"))})),userLinks.forEach((e=>{e&&(e.style.display="flex")})),hideFromMembers.forEach((e=>{e&&(e.style.display="block")}))}}));const getCookies=()=>{const e=document.cookie.split(";");let t={};return e.forEach((e=>{const a=e.split("=");t[a[0].trim()]=a[1]})),t},cookiesBar=document.getElementById("cookiesBar");if(cookiesBar){const a=document.getElementById("cookiesAccept"),o=document.getElementById("cookiesClose");getCookies()._acceptedCookies||(cookiesBar.style.display="flex"),a.addEventListener("click",(()=>{let e=new Date;e.setMonth(e.getMonth()+9),e.toUTCString(),document.cookie=`_acceptedCookies=true; expires=${e}; path=/`,cookiesBar.style.display="none"})),o.addEventListener("click",(()=>{cookiesBar.style.display="none"}))}const waitingCont=document.getElementById("waitingContainer");setTimeout((()=>{waitingCont&&"none"!==waitingCont.style.display&&window.location.reload()}),5e3);